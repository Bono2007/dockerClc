/*! clc 20-12-2017 */
var CLC=function(){window.console||(console={log:function(){},info:function(){}});var a={};return a.exoBase=function(b){function c(){var a=$("<div class='bloc-message'>Chargement ...</div>"),b=$("<div class='bloc-spinner'></div>");E.pageChargement.append(a,b),E.baseContainer.append(E.pageChargement)}function d(){E.pageTitre.empty(),E.blocIllustration.empty(),E.pageTitre.append(E.blocTitre,E.blocConsigneGenerale,E.blocIllustration),E.pageTitre.append(E.btnCommencer,E.btnParametrer),E.baseContainer.append(E.pageTitre)}function e(){E.pageQuestion.append(E.blocAnimation),E.pageQuestion.append(E.blocInfo),E.blocInfo.children(".toolbar").html(E.btnSuite),E.pageQuestion.append(E.blocScore),E.pageQuestion.append(E.btnValider),E.baseContainer.append(E.pageQuestion)}function f(){E.options.estRejouable?E.pageResultat.append(E.btnRecommencer):E.pageResultat.append(E.btnExerciceSuivant);var a=E.exoFolderPath+"lang/etoiles.png";E.baseContainer.append(E.pageResultat);var b=$("<div class='bloc-titre-resultat'>"+E.str.misc.resultat+"</div>"),c=$("<table class='table-resultat' ></table>"),d=$('<tr class="etoile"><td colspan="2"><img src="'+a+'"/></td></tr>'),e=$("<tr class='score'><td class='label'>"+E.str.misc.score+" :</td><td class='data'>&nbsp;</td></tr>"),f=$("<tr class='premier-essai'><td class='label'>"+E.str.misc.essai+" : </td><td class='data'>&nbsp;</td></tr>"),g=$("<tr class='temps'><td class='label'>"+E.str.misc.temps+" :</td><td class='data'>&nbsp;</td></tr>");c.append(d),c.append(e),c.append(g),E.options.totalEssai>1&&c.append(f),E.pageResultat.append(b,c)}function g(){var a=$("<div class='bloc-titre-parametre'>"+E.str.misc.option+"</div>");E.pageParametre.append(a,E.blocParametre,E.btnTesterParametre),E.baseContainer.append(E.pageParametre)}function h(){var b=new Date;E.tempsDebutExo=b.getTime(),E.score=0,E.indiceTentative=0,E.indiceQuestion=0,E.indiceEssai=0;var c=E.pageTitre.find(".snd-sprite");c.length>0,E.btnCommencer.hide(),E.btnParametrer.hide(),E.pageTitre.hide(),E.pageQuestion.show(),E.btnValider.show(),E.blocScore.html(w()),E.blocScore.show(),E.options.tempsExo>0?(E.chrono=new a.chrono("exo"),E.chrono.set(1e3*E.options.tempsExo),E.chrono.baseContainer.on("tempsDepasse",x)):E.options.tempsQuestion>0&&(E.chrono=new a.chrono("question"),E.chrono.set(1e3*E.options.tempsQuestion),E.chrono.baseContainer.on("tempsDepasse",x)),E.creerPageQuestion(),(E.options.tempsQuestion>0||E.options.tempsExo>0)&&(E.blocAnimation.append(E.chrono.baseContainer),E.chrono.start());var d=E.pageQuestion.find(".text-field");d.length>0&&$(d[0]).triggerHandler("mousedown"),E.pageQuestion.on("keydown",o),E.blocAnimation.on("touchmove",function(a){a.preventDefault()})}function i(){var a=E.pageTitre.find(".snd-sprite");a.length>0&&$(a).triggerHandler("stop"),E.btnCommencer.hide(),E.pageTitre.hide(),E.pageParametre.show(),E.blocParametre.empty(),E.creerPageParametre(),E.btnTesterParametre.show()}function j(){E.btnValider.hide();var a,b=E.evaluer();return"juste"==b?(E.blocAnimation.find("*").off(".clc"),E.options.tempsExo>0?E.chrono.pause():E.options.tempsQuestion>0&&E.chrono.stop(),E.score++,E.blocScore.html(w()),u(),s(),r("validationQuestion",b),q(b),t()):"faux"==b?(E.indiceEssai++,E.indiceEssai==E.options.totalEssai&&E.blocAnimation.find("*").off(".clc"),E.options.tempsExo>0?E.chrono.pause():E.options.tempsQuestion>0&&E.chrono.stop(),E.options.totalEssai==E.indiceEssai?(u(),s(),r("validationQuestion",b),q(b),t(),E.corriger()):(q(b),a=E.pageQuestion.find(".text-field"),a.length>0&&($(a[0]).attr("tabindex",-1).triggerHandler("mousedown"),$(a[0]).focus()),E.btnValider.show())):"rien"==b&&(q(b),a=E.pageQuestion.find(".text-field"),a.length>0&&($(a[0]).attr("tabindex",-1).triggerHandler("mousedown"),$(a[0]).focus()),E.btnValider.show()),b}function k(){var a=E.pageQuestion.find(".snd-sprite");for(a.length>0&&$(a).triggerHandler("stop"),E.btnSuite.hide(),E.blocInfo.hide(),E.indiceQuestion++,E.indiceEssai=0,E.indiceTentative=0,F=0;F<E.aTimeout.length;F++)clearTimeout(E.aTimeout[F]);for(E.aTimeout=[],F=0;F<E.aInterval.length;F++)clearInterval(E.aInterval[F]);if(E.aInterval=[],"undefined"!=typeof createjs){for(createjs.Tween.removeAllTweens(),createjs.Ticker.reset(),createjs.Ticker._timerId=null,createjs.Ticker._inited=!1,F=0;F<E.aStage.length;F++)createjs.Touch.disable(E.aStage[F]),E.aStage[F].removeAllEventListeners();E.aStage=[]}if(E.blocAnimation.empty(),E.indiceQuestion<E.options.totalQuestion){E.btnValider.show(),E.creerPageQuestion(),(E.options.tempsQuestion>0||E.options.tempsExo>0)&&(E.blocAnimation.append(E.chrono.baseContainer),E.chrono.baseContainer.on("tempsDepasse",x),E.chrono.start()),E.btnSuite.off("keydown",o);var b=E.pageQuestion.find(".text-field");b.length>0&&($(b[0]).attr("tabindex",-1).triggerHandler("mousedown"),$(b[0]).focus()),E.pageQuestion.on("keydown",o)}else(E.options.tempsQuestion>0||E.options.tempsExo>0)&&E.chrono.stop(),E.pageQuestion.hide(),E.blocAnimation.empty(),E.btnRecommencer.show(),v(),r("finExercice",E.score,E.dureeExo),E.pageResultat.show(),E.btnSuite.off("keydown",o)}function l(){E.creerDonnees(),E.pageResultat.hide(),E.blocIllustration.empty(),E.blocTitre.empty(),E.blocConsigneGenerale.empty(),E.creerPageTitre(),E.blocIllustration.children(".image-sprite").css({position:"static",margin:"auto"}),E.btnParametrer=E.options.parametrable?E.btnParametrer.show():E.btnParametrer.hide(),E.pageTitre.show(),E.btnCommencer.show(),E.options.parametrable&&E.btnParametrer.show(),E.btnSuite.hide()}function m(){var a;for(a=0;a<E.aTimeout.length;a++)clearTimeout(E.aTimeout[a]);for(a=0;a<E.aInterval.length;a++)clearInterval(E.aInterval[a]);if(E.blocAnimation.find("*").off(".clc"),"undefined"!=typeof createjs){for(createjs.Ticker.reset(),createjs.Ticker._timerId=null,createjs.Ticker._inited=!1,a=0;a<E.aStage.length;a++)createjs.Touch.disable(E.aStage[a]),E.aStage[a].removeAllEventListeners();E.aStage=[]}E.baseContainer.trigger("close")}function n(){E.btnTesterParametre.hide();var a=$(E.blocParametre).serializeArray();$.each(a,function(a,b){var c=b.name;$.isArray(E.options[c])&&(E.options[c]=[])}),$.each(a,function(a,b){var c=b.name;$.isArray(E.options[c])?isNaN(Number(b.value))?"true"===b.value?E.options[c].push(!0):"false"===b.value?E.options[c].push(!1):E.options[c].push(b.value):E.options[c].push(Number(b.value)):isNaN(Number(b.value))?"true"===b.value?E.options[c]=!0:"false"===b.value?E.options[c]=!1:E.options[c]=b.value:E.options[c]=Number(b.value)}),void 0!==E.options.temps_question&&(E.options.tempsQuestion=E.options.temps_question),void 0!==E.options.temps_max&&(E.options.tempsExo=E.options.temps_max),void 0!==E.options.temps_exo&&(E.options.tempsExo=E.options.temps_exo),void 0!==E.options.nbre_questions&&(E.options.totalQuestion=E.options.nbre_questions),r("validationOption"),E.arRessources=[],E.loadRessources(E.oRessources),$.when.apply($,E.arRessources).done(function(){E.pageParametre.hide(),E.btnRecommencer.triggerHandler("click")})}function o(a){var b=E.baseContainer.find("button").filter(":visible");return b?13==a.which?(b.triggerHandler("click"),!1):void 0:!0}function p(a){a.preventDefault();var b=$(a.delegateTarget).data("valeur"),c=$(a.delegateTarget).hasClass("disabled");if(c)return!1;switch(b){case"commencer":E.keyboard.enterKey.html(E.str.bouton.valider),E.keyboard.enterKey.data("valeur","valider"),E.keyboard.config({numeric:"enabled",arrow:"enabled"}),h(a),E.baseContainer.find(".bouton").hide();break;case"valider":var d=j(a);E.indiceQuestion<E.options.totalQuestion-1?"rien"==d||E.options.totalEssai==E.indiceEssai&&(E.keyboard.enterKey.html(E.str.bouton.suite),E.keyboard.enterKey.data("valeur","suite"),E.keyboard.config({numeric:"disabled",arrow:"disabled"})):(E.keyboard.enterKey.html(E.str.bouton.resultat),E.keyboard.enterKey.data("valeur","resultats"),E.keyboard.config({numeric:"disabled",arrow:"disabled"})),E.baseContainer.find(".bouton").hide();break;case"suite":E.indiceQuestion<E.options.totalQuestion?(E.keyboard.enterKey.html(E.str.bouton.valider),E.keyboard.enterKey.data("valeur","valider"),E.keyboard.config({numeric:"enabled",arrow:"enabled"})):(E.keyboard.enterKey.html(E.str.bouton.resultat),E.keyboard.enterKey.data("valeur","resultats")),k(a),E.baseContainer.find(".bouton").hide();break;case"resultats":k(a),E.options.estRejouable?(E.keyboard.enterKey.html(E.str.bouton.recommencer),E.keyboard.enterKey.data("valeur","recommencer")):(E.keyboard.enterKey.html(E.str.bouton.suivant),E.keyboard.enterKey.data("valeur","suivant")),E.baseContainer.find(".bouton").hide();break;case"recommencer":l(),E.keyboard.enterKey.html(E.str.bouton.commencer),E.keyboard.enterKey.data("valeur","commencer"),E.baseContainer.find(".bouton").hide();break;case"suivant":m(),E.keyboard.enterKey.html(E.str.bouton.commencer),E.keyboard.enterKey.data("valeur","commencer"),E.baseContainer.find(".bouton").hide();break;case"suppr":var e=$(E.pageQuestion.find(".text-field.actif").get(0)),f=e.text(),g=f.substr(0,f.length-1);e.text(g);break;case"gauche":evt=jQuery.Event("keydown"),evt.which=37,E.pageQuestion.trigger(evt);break;case"haut":evt=jQuery.Event("keydown"),evt.which=38,E.pageQuestion.trigger(evt);break;case"droite":evt=jQuery.Event("keydown"),evt.which=39,E.pageQuestion.trigger(evt);break;case"bas":evt=jQuery.Event("keydown"),evt.which=40,E.pageQuestion.trigger(evt);break;case"exo":break;default:e=$(E.pageQuestion.find(".text-field.actif")[0]),e.append(b)}return!1}function q(a){if("juste"==a?(E.blocInfo.css({background:"#8cc63f"}),E.blocInfo.removeClass("rien"),E.blocInfo.removeClass("erreur"),E.blocInfo.addClass("bravo"),E.blocInfo.children(".contenu").html(E.str.info.msgJuste)):"faux"==a?(E.blocInfo.removeClass("rien"),E.blocInfo.removeClass("bravo"),E.blocInfo.addClass("erreur"),E.indiceEssai==E.options.totalEssai?(E.blocInfo.css({background:"#EC0000"}),E.blocInfo.children(".contenu").html(E.str.info.msgFauxQuestionSuivante)):(E.blocInfo.css({background:"#FF7F00"}),E.blocInfo.children(".contenu").html(E.str.info.msgFaux))):"tempsDepasseFaux"==a?(E.blocInfo.css({background:"#EC0000"}),E.blocInfo.removeClass("rien"),E.blocInfo.removeClass("bravo"),E.blocInfo.addClass("erreur"),E.blocInfo.children(".contenu").html(E.str.info.msgTempsDepasseFaux)):"tempsDepasseJuste"==a?(E.blocInfo.css({background:"#8cc63f"}),E.blocInfo.removeClass("rien"),E.blocInfo.removeClass("erreur"),E.blocInfo.addClass("bravo"),E.blocInfo.children(".contenu").html(E.str.info.msgTempsDepasseJuste)):(E.blocInfo.css({background:"#308DCC"}),E.blocInfo.removeClass("bravo"),E.blocInfo.removeClass("erreur"),E.blocInfo.addClass("rien"),E.blocInfo.children(".contenu").html(E.str.info.msgRien)),E.indiceQuestion==E.options.totalQuestion-1&&"rien"!=a&&E.indiceEssai==E.options.totalEssai){E.blocInfo.css({visibility:"visible"});var b="<br>"+E.str.info.msgFin;E.blocInfo.children(".contenu").append(b)}E.blocInfo.show()}function r(){var a=arguments[0],b=0;if(b=E.options.totalTentative>1?E.indiceQuestion*E.indiceTentative:E.indiceQuestion,"validationQuestion"==a){var c=arguments[1];E.baseContainer.trigger(a,{idExo:E.options.idExo,resEval:c,indiceQuestion:b})}else if("finExercice"==a){var d=arguments[1],e=arguments[2],f=Number(E.options.totalQuestion)*Number(E.options.totalTentative);E.baseContainer.trigger(a,{idExo:E.options.idExo,numExo:E.options.numExo,score:d,total:f,duree:e})}else"validationOption"==a&&E.baseContainer.trigger(a,E.options)}function s(){var a=new Date;E.tempsFinExo=a.getTime()}function t(){if(E.pageQuestion.off("keydown",o),E.indiceQuestion<E.options.totalQuestion-1?(E.btnSuite.html(E.str.bouton.suite),E.keyboard.enterKey.html(E.str.bouton.suite),E.keyboard.enterKey.data("valeur","suite")):(E.btnSuite.html(E.str.bouton.resultat),E.keyboard.enterKey.html(E.str.bouton.resultat),E.keyboard.enterKey.data("valeur","resultats")),E.tabletSupport===!0||"debug"==E.tabletSupport)E.btnSuite.hide(),E.keyboard.config({numeric:"disabled",arrow:"disabled",valider:"enabled"});else{E.btnSuite.show(),E.btnSuite.on("keydown",o);setTimeout(function(){E.btnSuite.focus()},50)}}function u(){var a=E.pageQuestion.find(".text-field");a.length>0&&a.each(function(){$(this).attr("disabled",!0)})}function v(){var a,b="";E.options.totalTentative?(b=E.score+" "+E.str.misc.sur+" "+E.options.totalTentative*E.options.totalQuestion,a=100*Number(E.score)/(Number(E.options.totalTentative)*Number(E.options.totalQuestion))):(b=E.score+" "+E.str.misc.sur+" "+E.options.totalQuestion,a=100*Number(E.score)/Number(E.options.totalQuestion)),E.pageResultat.find(".etoile img").css("backgroundSize",a+"% 100%"),E.pageResultat.find(".score .data").html(b),E.dureeExo=Math.floor((E.tempsFinExo-E.tempsDebutExo)/1e3);var c,d=Math.floor(E.dureeExo/60),e=E.dureeExo%60,f=d>1?"s":"",g=e>1?"s":"";c=0===d?e+" "+E.str.misc.sec+g:d+" "+E.str.misc.min+f+" "+e+" "+E.str.misc.sec+g,E.pageResultat.find(".temps .data").html(c)}function w(){return E.options.totalTentative?txtScore=E.str.misc.score+" : "+E.score+" sur "+E.options.totalTentative*E.options.totalQuestion:txtScore=E.str.misc.score+" : "+E.score+" sur "+E.options.totalQuestion,txtScore}function x(){for(E.blocAnimation.find("*").off(".clc"),F=0;F<E.aTimeout.length;F++)clearTimeout(E.aTimeout[F]);for(E.aTimeout=[],F=0;F<E.aInterval.length;F++)clearInterval(E.aInterval[F]);if("undefined"!=typeof createjs){for(createjs.Tween.removeAllTweens(),createjs.Ticker.reset(),createjs.Ticker._timerId=null,createjs.Ticker._inited=!1,F=0;F<E.aStage.length;F++)createjs.Touch.disable(E.aStage[F]),E.aStage[F].removeAllEventListeners();E.aStage=[]}var a=E.evaluer();E.btnValider.hide(),u(),s(),"juste"==a?(1==E.options.totalTentative&&(E.score++,E.blocScore.html(w()),r("validationQuestion",a)),q("tempsDepasseJuste")):(q("tempsDepasseFaux"),r("validationQuestion","temps depassé"),E.corriger()),t(),"exo"==E.chrono.type&&(E.indiceQuestion=E.options.totalQuestion),(E.tabletSupport===!0||"debug"==E.tabletSupport)&&(E.indiceQuestion<E.options.totalQuestion-1?(E.keyboard.enterKey.html(E.str.bouton.suite),E.keyboard.enterKey.data("valeur","suite"),E.keyboard.config({numeric:"disabled",arrow:"disabled"})):(E.keyboard.enterKey.html(E.str.bouton.resultat),E.keyboard.enterKey.data("valeur","resultats"),E.keyboard.config({numeric:"disabled",arrow:"disabled"})))}function y(a,b){var c=E.exoFolderPath+b,d=new Image,e=$.Deferred();return d.onload=function(){var b=$("<div class='image-sprite ui-helper-clearfix'></div>"),c=d.width,f=d.height;b.css({position:"absolute",width:c,height:f}),b.append(d),d.style.position="absolute",E.aImageElt[a]=d,E.images[a]=b,e.resolve()},d.src=c,e}function z(a,b){var c=E.exoFolderPath+b,d=$.Deferred();return $.ajax({type:"GET",url:c,success:function(b){E.images[a]=b,d.resolve()},dataType:"xml"}),d}function A(a,b,c){var d,e;if(c){var f=E.exoFolderPath.lastIndexOf("exercices"),g=E.exoFolderPath.substr(0,f)+"api/getjson.php";d=E.exoFolderPath+b,e=$.Deferred(),$.ajax({type:"POST",data:{nomExo:b},url:g,success:function(b){E[a]=JSON.parse(b),e.resolve()},error:function(a,b,c){},dataType:"text"})}else d=E.exoFolderPath+b,e=$.Deferred(),$.ajax({type:"GET",url:d,success:function(b){E[a]=b,e.resolve()},error:function(a,b,c){},dataType:"json"});return e}function B(a,b){var c=new Audio,d=$.Deferred(),e=$("<div class='snd-sprite'></div>");e.addClass("play"),e.data("playing",!1),E.sounds[a]=e,c.addEventListener("canplaythrough",function(){d.resolve()},!1);for(var f=0;f<b.length;f++){var g=b[f],h=g.substring(g.lastIndexOf(".")+1),i=document.createElement("source");"ogg"==h?i.type="audio/ogg":"mp3"==h?i.type="audio/mpeg":d.resolve(),i.src=E.exoFolderPath+"/"+b[f],c.appendChild(i)}return e.on("click",{audio:c},C),e.on("stop",{audio:c},D),navigator.userAgent.match(/iPad/i)&&d.resolve(),d}function C(a){var b=$(a.delegateTarget),c=a.data.audio;b.data("playing")?(b.data("playing",!1),c.pause(),b.removeClass("pause"),b.addClass("play")):(b.data("playing",!0),c.play(),b.removeClass("play"),b.addClass("pause"));var d=$(this).parents(".page").find(".text-field");d.length>0&&($(d[0]).attr("tabindex",-1).triggerHandler("mousedown"),$(d[0]).focus())}function D(a){var b=$(a.delegateTarget),c=a.data.audio;c.pause(),c.currentTime=0,b.data("playing",!1),b.removeClass("pause"),b.addClass("play")}var E={};E.baseContainer=$("<div class='clc base-container'></div>"),E.pageChargement=$("<div class='page chargement'></div>"),E.pageTitre=$("<div class='page titre'></div>"),E.blocTitre=$("<div class='bloc-titre'></div>"),E.blocConsigneGenerale=$("<div class='bloc-consigne-generale'></div>"),E.blocIllustration=$("<div class='bloc-illustration ui-helper-clearfix'></div>"),E.pageQuestion=$("<div class='page question'></div>"),E.blocAnimation=$("<div class='bloc-animation'></div>"),E.blocInfo=$("<div class='bloc-info'><div class='contenu'></div><div class='toolbar'></div></div>"),E.blocScore=$("<div class='bloc-score'></div>"),E.pageResultat=$("<div class='page resultat'></div>"),E.pageParametre=$("<div class='page parametre'></div>"),E.blocParametre=$("<form class='bloc-parametre'><form>"),E.btnParametrer=$("<button type='button' class='bouton parametrer' ></button>"),E.btnCommencer=$("<button type='button' class='bouton commencer' ></button>"),E.btnValider=$("<button type='button' class='bouton valider'></button>"),E.btnSuite=$("<button type='button' class='bouton suite'></button>"),E.btnRecommencer=$("<button type='button' class='bouton recommencer'></button>"),E.btnExerciceSuivant=$("<button type='button' class='bouton exercice-suivant'></button>"),E.btnTesterParametre=$("<button type='button' class='bouton tester-parametre'></button>"),E.exoFolderPath=b+"/",E.arStringRessources=[],E.arRessources=[],E.images={},E.str={},E.txt={},E.videos={},E.aImageElt=[],E.sounds={},E.movies={},E.options={parametrable:!0},E.tabletSupport=!1,E.indiceQuestion=0,E.indiceEssai=0,E.indiceTentative=0,E.score=0,E.tempsDebutExo=0,E.tempsFinExo=0,E.dureeExo=0,E.idExo=0,E.numExo=0,E.keyboard={},E.chrono={},E.aTimeout=[],E.aInterval=[],E.aStage=[],E.aTween=[],E.init=function(){c(),E.options.totalQuestion=1,E.options.totalTentative=1,E.options.totalEssai=1,E.options.tempsExo=0,E.options.tempsQuestion=0,E.options.estRejouable=!0,E.creerOptions(),E.tabletSupport=E.options.tabletSupport||!1,void 0!==E.options.temps_question&&(E.options.tempsQuestion=E.options.temps_question),void 0!==E.options.temps_max&&(E.options.tempsExo=E.options.temps_max),void 0!==E.options.temps_exo&&(E.options.tempsExo=E.options.temps_exo),void 0!==E.options.nbre_questions&&(E.options.totalQuestion=E.options.nbre_questions),E.loadRessources(E.oRessources),$.when.apply($,E.arRessources).done(function(){d(),e(),f(),g(),E.btnCommencer.html(E.str.bouton.commencer),E.btnValider.html(E.str.bouton.valider),E.btnSuite.html(E.str.bouton.suite),E.btnRecommencer.html(E.str.bouton.recommencer),E.btnExerciceSuivant.html(E.str.bouton.suivant),E.btnTesterParametre.html(E.str.bouton.tester),E.creerDonnees(),E.creerPageTitre(),E.blocIllustration.children(".image-sprite").css({position:"static",margin:"auto"}),E.btnParametrer=E.options.parametrable?E.btnParametrer.show():E.btnParametrer.hide(),E.btnSuite.hide(),E.btnCommencer.on("click",h),E.btnParametrer.on("click",i),E.btnValider.on("click",j),E.btnSuite.on("click",k),E.btnRecommencer.on("click",l),E.btnExerciceSuivant.on("click",m),E.btnTesterParametre.on("click",n),E.pageChargement.hide(),E.pageTitre.show(),E.keyboard=new a.keyboard,(E.tabletSupport===!0||"debug"==E.tabletSupport)&&(E.baseContainer.append(E.keyboard.baseContainer),E.keyboard.baseContainer.find(".key").on("touchstart",p),E.baseContainer.find(".bouton").hide(),E.keyboard.config({numeric:"disabled",arrow:"disabled"}))})},E.avancer=function(){E.btnValider.triggerHandler("click")},E.poursuivreExercice=function(a,b,c){E.blocAnimation.find("*").off(".clc");var d=c||function(){return!1},e=E.evaluer();E.indiceEssai=1;var f;if("juste"==e)E.options.tempsExo>0?E.chrono.pause():E.options.tempsQuestion>0&&E.chrono.stop(),E.score++,E.blocScore.html(w()),u(),s(),r("validationQuestion",e),q(e),E.indiceQuestion<E.options.totalQuestion-1?f=setTimeout(function(a){E.btnSuite.triggerHandler("click"),d(a)},a):t();else if("faux"==e)E.options.tempsExo>0?E.chrono.pause():E.options.tempsQuestion>0&&E.chrono.stop(),u(),s(),r("validationQuestion",e),q(e),E.corriger(),E.indiceQuestion<E.options.totalQuestion-1?f=setTimeout(function(a){E.btnSuite.triggerHandler("click"),d(a)},b):t();else if("rien"==e){q(e);var g=E.pageQuestion.find(".text-field");g.length>0&&g[0].focus()}},E.poursuivreQuestion=function(){if(E.indiceEssai=1,E.indiceTentative++,E.indiceTentative<E.options.totalTentative)return"juste"==E.evaluer()&&(E.score++,E.blocScore.html(w())),!0;for(E.blocAnimation.find("*").off(".clc"),F=0;F<E.aTimeout.length;F++)clearTimeout(E.aTimeout[F]);for(E.aTimeout=[],F=0;F<E.aInterval.length;F++)clearInterval(E.aInterval[F]);if("undefined"!=typeof createjs){for(createjs.Tween.removeAllTweens(),createjs.Ticker.reset(),createjs.Ticker._timerId=null,createjs.Ticker._inited=!1,F=0;F<E.aStage.length;F++)createjs.Touch.disable(E.aStage[F]),E.aStage[F].removeAllEventListeners();E.aStage=[]}E.options.tempsExo>0?E.chrono.pause():E.options.tempsQuestion>0&&E.chrono.stop(),E.btnValider.hide();var a=E.evaluer();return"juste"==a?(E.score++,E.blocScore.html(w()),u(),s(),r("validationQuestion",a),q(a),E.indiceQuestion==E.options.totalQuestion-1?E.blocInfo.children(".contenu").html(E.str.info.msgFin):E.blocInfo.children(".contenu").html(E.str.info.msgFinQuestion),E.btnSuite.off("keydown",o),t(),!1):(u(),s(),r("validationQuestion",a),q("faux"),E.indiceQuestion==E.options.totalQuestion-1?E.blocInfo.children(".contenu").html(E.str.info.msgFin):E.blocInfo.children(".contenu").html(E.str.info.msgFinQuestion),E.corriger(),E.btnSuite.off("keydown",o),t(),!1)},E.terminerExercice=function(a){var b=a||0;setTimeout(function(){u(),s(),E.blocInfo.addClass("rien"),E.blocInfo.children(".contenu").html(E.str.info.msgFin),E.blocInfo.show(),t()},b)},E.loadRessources=function(a){"function"==typeof a?oRes=a():oRes=a,oRes.str="lang/clc_fr.json";var b,c;for(var d in oRes){var e=oRes[d];if("string"==typeof e)b=e.lastIndexOf("."),c=e.substring(b+1),"png"==c||"gif"==c||"jpg"==c?E.arRessources.push(y(d,e)):"svg"==c?E.arRessources.push(z(d,e)):"json"==c&&E.arRessources.push(A(d,e,E.options.crossdomain));else{for(var f=!1,g=0;g<e.length;g++)b=e[g].lastIndexOf("."),c=e[g].substring(b+1),("mp3"==c||"ogg"==c||"m4a"==c)&&(f=!0);f&&E.arRessources.push(B(d,e))}}},E.getURI=function(a){return E.exoFolderPath+E.oRessources[a]},E.getSoundSprite=function(a){return E.arSoundSprite[a].clone(!0)},E.btnValider.afficher=function(){E.tabletSupport?E.keyboard.config({large:"enabled"}):E.btnValider.show()},E.btnValider.cacher=function(){E.tabletSupport?E.keyboard.config({large:"disabled"}):E.btnValider.hide()},E.refreshScore=function(){E.blocScore.html(w())};var F;return E.unload=function(){for(F=0;F<E.aTimeout.length;F++)clearTimeout(E.aTimeout[F]);for(E.aTimeout=[],F=0;F<E.aInterval.length;F++)clearInterval(E.aInterval[F]);if(E.aInterval=[],E.blocAnimation.find("*").off(".clc"),"undefined"!=typeof createjs){for(createjs.Ticker.reset(),createjs.Ticker._timerId=null,createjs.Ticker._inited=!1,F=0;F<E.aStage.length;F++)createjs.Touch.disable(E.aStage[F]),E.aStage[F].removeAllEventListeners();E.aStage=[]}return"exercice unloaded"},E.baseContainer.unload=E.unload,E.setTimeout=function(a,b){var c=window.setTimeout(a,b);return E.aTimeout.push(c),c},E.clearTimeout=function(a){window.clearTimeout(E.aTimeout.slice(E.aTimeout.indexOf(a),1))},E.setInterval=function(a,b){var c=window.setInterval(a,b);return E.aInterval.push(c),c},E.clearInterval=function(a){window.clearInterval(a)},E.afficherBtnSuite=t,E.cacherBtnSuite=function(){E.btnSuite.hide(),E.keyboard.config({large:"disabled"})},E.cacherBlocInfo=function(){E.blocInfo.css({visibility:"hidden"})},E},a}();CLC=function(a){return a.chrono=function(a){function b(a){d.count++,a>0&&(d.pas=a*d.largeurInit/d.duree,d.largeur-=d.pas),e.clearRect(0,0,f,11),e.lineWidth=1,e.fillStyle=h;var b=d.largeur;return b>0?(e.strokeStyle=h,e.beginPath(),e.moveTo(5,5),e.lineTo(b,5),e.stroke(),e.strokeStyle=g,e.beginPath(),e.moveTo(b+5,5),e.lineTo(d.largeurInit+5,5),e.stroke(),e.beginPath(),e.arc(b+5,5,5,0,2*Math.PI),e.fill(),void 0):(cancelAnimationFrame(d.intervalId),d.baseContainer.trigger("tempsDepasse"),d.count=0,d.largeur=690,e.clearRect(0,0,700,11),e.strokeStyle=g,e.beginPath(),e.moveTo(5,5),e.lineTo(d.largeur,5),e.stroke(),!1)}function c(a,b){function c(g){if(e!==!1){d.intervalId=requestAnimationFrame(c,b);var h=g-f;160>h&&(e=a(h)),f=g}}var e,f=+new Date;c(f)}var d=this;d.baseContainer=$("<canvas class='bloc-chrono' width='700' height='11'></canvas>");var e=d.baseContainer[0].getContext("2d"),f=700,g="#ff0000",h="#0099cc";d.duree=0,d.delai=60,d.count=0,d.type=a,d.largeur=690,d.largeurInit=690,d.set=function(a){d.duree=a,d.pas=.5},d.start=function(){c(b)},d.pause=function(){cancelAnimationFrame(d.intervalId)},d.stop=function(){cancelAnimationFrame(d.intervalId),d.count=1,d.largeur=690,d.pas=.5}},a}(CLC),CLC=function(a){return a.keyboard=function(){var a=this;a.baseContainer=$("<div class='keyboard base-container'></div>");var b=$("<div class='zone-clavier-1'></div>"),c=$("<div class='zone-clavier-2'></div>"),d=$("<div class='zone-clavier-3'></div>"),e=$("<div class='zone-clavier-4'></div>");a.baseContainer.append(b,c,d,e);var f=$("<div class='key arrow left'></div>");f.data("valeur","gauche"),b.append(f),f=$("<div class='key arrow up'></div>"),f.data("valeur","haut"),b.append(f);for(var g=0;10>g;g++)f=$("<div class='key numeric'>"+(g+1)%10+"</div>"),f.data("valeur",(g+1)%10),c.append(f);f=$("<div class='key large'>Commencer</div>"),f.data("valeur","commencer"),a.enterKey=f,d.append(f),f=$("<div class='key virg'>,</div>"),f.data("valeur",","),d.append(f),f=$("<div class='key medium suppr'>Suppr.</div>"),f.data("valeur","suppr"),d.append(f),f=$("<div class='key arrow right'></div>"),f.data("valeur","droite"),e.append(f),f=$("<div class='key arrow down'></div>"),f.data("valeur","bas"),e.append(f),a.config=function(b){void 0!==b.numeric&&"enabled"==b.numeric?(a.baseContainer.find(".key.numeric").removeClass("disabled"),a.baseContainer.find(".key.virg").removeClass("disabled"),a.baseContainer.find(".key.suppr").removeClass("disabled")):void 0!==b.numeric&&"disabled"==b.numeric&&(a.baseContainer.find(".key.numeric").addClass("disabled"),a.baseContainer.find(".key.virg").addClass("disabled"),a.baseContainer.find(".key.suppr").addClass("disabled")),void 0!==b.virg&&"enabled"==b.virg?a.baseContainer.find(".key.virg").removeClass("disabled"):void 0!==b.virg&&"disabled"==b.virg&&a.baseContainer.find(".key.virg").addClass("disabled"),void 0!==b.suppr&&"enabled"==b.suppr?a.baseContainer.find(".key.suppr").removeClass("disabled"):void 0!==b.suppr&&"disabled"==b.suppr&&a.baseContainer.find(".key.suppr").addClass("disabled"),void 0!==b.arrow&&"enabled"==b.arrow?a.baseContainer.find(".key.arrow").removeClass("disabled"):void 0!==b.arrow&&"disabled"==b.arrow&&a.baseContainer.find(".key.arrow").addClass("disabled"),void 0!==b.valider&&"enabled"==b.valider?a.baseContainer.find(".key.large").removeClass("disabled"):void 0!==b.valider&&"disabled"==b.large&&a.baseContainer.find(".key.large").addClass("disabled"),void 0!==b.large&&"enabled"==b.large?a.baseContainer.find(".key.large").removeClass("disabled"):void 0!==b.large&&"disabled"==b.large&&a.baseContainer.find(".key.large").addClass("disabled")}},a}(CLC);var CLC=function(a){return a.arScriptEnAttente=[],a.arRequeteEnAttente=[],a.arScriptCharge=[],a.lazyloadScript=function(b,c,d){for(var e=-1,f=0;f<a.arScriptCharge.length;f++)b==a.arScriptCharge[f]&&(e=f);if(e>-1){if(d&&"function"==typeof d)return d.call(this),!1}else{e=-1;for(var g=0;f<a.arScriptEnAttente.length;g++)b==a.arScriptEnAttente[g]&&(e=g);if(e>-1){var h=a.arRequeteEnAttente[e];h.done(function(c){a.arScriptCharge.push(b),a.arScriptEnAttente.splice(e,1),a.arRequeteEnAttente.splice(e,1),d.call(this,c)})}else if(c&&"function"==typeof c){var i=jQuery.ajax({url:b,dataType:"script",cache:!1});a.arScriptEnAttente.push(b),a.arRequeteEnAttente.push(i),i.done(function(d){a.arScriptCharge.push(b);for(var e=-1,f=0;f<a.arScriptEnAttente.length;f++)b==a.arScriptEnAttente[f]&&(e=f);a.arScriptEnAttente.splice(e,1),c.call(this,d)})}else jQuery.ajax({url:b,dataType:"script",cache:!1,success:function(){a.arScriptCharge.push(b)}})}return!1},a.loadExo=function(b,c){var d=b.lastIndexOf("/"),e=b.substring(0,d),f=b.substring(d+1),g=$.Deferred();return a.lazyloadScript(b+"/"+f+".js",function(){var a=CLC[f](c,e);g.resolve(a)},function(){var a=CLC[f](c,e);g.resolve(a)}),g},a.afficherExo=function(b,c,d,e){var f=b+c;d.crossdomain=!0,d.parametrable=!1;var g=a.loadExo(f,d);g.done(function(a){$(e).empty(),$(e).dialog({close:function(b){a.unload()},width:775}),$(e).dialog("open"),$(e).html(a)})},a}(CLC);CLC=function(a){return a.utils=function(){var a={};a.indexOf=function(a,b){if(null===b)throw new TypeError;var c=Object(b),d=c.length>>>0;if(0===d)return-1;var e=0;if(arguments.length>0&&(e=Number(arguments[2]),e!=e?e=0:0!==e&&e!=1/0&&e!=-(1/0)&&(e=(e>0||-1)*Math.floor(Math.abs(e)))),e>=d)return-1;for(var f=e>=0?e:Math.max(d-Math.abs(e),0);d>f;f++)if(f in c&&c[f]===a)return f;return-1},a.shuffleArray=function(a){for(var b,c,d=a.length;d;b=parseInt(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a},a.compareArray=function(a,b){if(a.length!=b.length)return!1;for(var c=0;c<b.length;c++){if(a[c].compare&&!a[c].compare(b[c]))return!1;if(a[c]!==b[c])return!1}return!0},a.find=function(b,c){for(var d=c.length,e=-1,f=0;d>f;f++)a.compareArray(b,c[f])&&(e=f);return e},a.getArrayNombre=function(a){var b=[];if(a.indexOf(";")>0)b=a.split(";"),b.forEach(function(a,b,c){c[b]=Number(a)});else if(a.indexOf("-")>0)for(var c=Number(a.split("-")[0]),d=Number(a.split("-")[1]),e=c;d>=e;e++)b.push(Number(e));else b.push(Number(a));return b},a.numToStr=function(a){var b=[],c=[],d="",e="";b=2==String(a).split(".").length?String(a).split(".")[0].split(""):String(a).split(""),2==String(a).split(".").length?c=String(a).split(".")[1].split(""):d="";for(var f=b.length-1;f>=0;f--)e=(b.length-f)%3===0&&f>0?" "+b[f]+e:b[f]+e;if(c.length>0){for(var g=0;g<c.length;g++)d=g%3===0&&g>0?d+" "+c[g]:d+c[g];d=","+d}return e+d},a.strToNum=function(a){return Number(a.split(",").join(".").replace(" ",""))},a.genUid=function(){for(var a=[],b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),c=0;10>c;c++){var d=0+Math.floor(Math.random()*(b.length-1-0+1));a[c]=b[d]}return a.join("")},a.random=function(a,b){return a+Math.floor(Math.random()*(b-a+1))};var b={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},c="webkit moz o ms khtml".split(" ");if("undefined"!=typeof document.cancelFullScreen)b.supportsFullScreen=!0;else for(var d=0,e=c.length;e>d;d++)if(b.prefix=c[d],"undefined"!=typeof document[b.prefix+"CancelFullScreen"]){b.supportsFullScreen=!0;break}return b.supportsFullScreen&&(b.fullScreenEventName=b.prefix+"fullscreenchange",b.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},b.requestFullScreen=function(a){return""===this.prefix?a.requestFullScreen(Element.ALLOW_KEYBOARD_INPUT):a[this.prefix+"RequestFullScreen"](Element.ALLOW_KEYBOARD_INPUT)},b.cancelFullScreen=function(){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()}),window.fullScreenApi=b,a}(),a}(CLC),CLC=function(a){return CLC.animation=function(){function a(b,c,d,e){if(this&&this instanceof a){if(arguments.length<2)throw new TypeError("MiniDaemon - not enough arguments");b&&(this.owner=b),this.task=c,isFinite(d)&&d>0&&(this.rate=Math.floor(d)),e>0&&(this.length=Math.floor(e))}}$.support.transition||($.fn.transition=$.fn.animate);var b={};
b.translate=function(a,b,c,d,e,f,g){var h,i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"},j=a[0];for(var k in i)void 0!==j.style[k]&&(j.style[k]="translate3d(1px,1px,1px)",h=window.getComputedStyle(j).getPropertyValue(i[k]));void 0!==h&&h.length>0&&"none"!==h?(0!==b&&(b-=a.position().left),0!==c&&(c-=a.position().top),a.off("webkitTransitionEnd msTransitionEnd transitionend"),a.on("webkitTransitionEnd msTransitionEnd transitionend",g),a.css({WebkitTransition:"-webkit-transform "+e+"ms "+f,WebkitTransform:"translate3d("+b+"px, "+c+"px, "+d+"px)",msTransition:"-ms-transform "+e+"ms "+f,msTransform:"translate3d("+b+"px, "+c+"px, "+d+"px)",transition:"transform "+e+"ms "+f,transform:"translate3d("+b+"px, "+c+"px, "+d+"px)"})):Modernizr.csstransitions?(0===b&&(b=a.position().left),0===c&&(c=a.position().top),a.on("transitionend",g),a.css({MozTransition:"all "+e+"ms "+f}),a.css({left:b,top:c})):(0===b&&(b=a.position().left),0===c&&(c=a.position().top),a.animate({left:b,top:c},e,f,g))},b.translateStop=function(a){if(Modernizr.csstransforms){var b=a.position().left,c=a.position().top;a.css({WebkitTransition:"-webkit-transform 0s",WebkitTransform:"translate(0,0)",MsTransition:"-ms-transform 0s linear",MsTransform:"translate3d(0px,0px,0)",MozTransition:"-moz-transform 0s linear",MozTransform:"translate3d(0px,0px,0)",transition:"transform 0s linear",transform:"translate3d(0px,0px,0)"}),a.css({left:b,top:c}),a.off("transitionend transitionEnd oTransitionEnd webkitTransitionEnd MsTransitionEnd")}else a.stop()},b.spin=function(a,b,c,d){a.on("webkitTransitionEnd transitionend",function(b){a.off("webkitTransitionEnd transitionend"),a.css({WebkitTransition:"none",MozTransition:"none",WebkitTransform:"none",MozTransform:"none"}),"function"==typeof d&&d(b)}),a.css({WebkitTransition:"-webkit-transform "+c+"ms linear",MozTransition:"-moz-transform "+c+"ms linear",WebkitTransform:"rotate("+b+"deg)",MozTransform:"rotate("+b+"deg)"})},b.rotate=function(a,b){a.css({WebkitTransform:"rotate("+b+"deg)",MozTransform:"rotate("+b+"deg)"})},b.glow=function(a,b,c,d){"none"==arguments[1]?a.css({MozBoxShadow:"none",WebkitBoxShadow:"none",boxShadow:"none"}):a.css({MozBoxShadow:"0 0 "+d+"px "+c+"px "+b,WebkitBoxShadow:"0 0 "+d+"px "+c+"px "+b,boxShadow:"0 0 "+d+"px "+c+"px "+b})},b.creerDemon=function(b,c,d,e){return new a(b,c,d,e)};var c=window.setTimeout,d=window.setInterval;return window.setTimeout=function(a,b){var d=this,e=Array.prototype.slice.call(arguments,2);return c(a instanceof Function?function(){a.apply(d,e)}:a,b)},window.setInterval=function(a,b){var c=this,e=Array.prototype.slice.call(arguments,2);return d(a instanceof Function?function(){a.apply(c,e)}:a,b)},a.prototype.owner=null,a.prototype.task=null,a.prototype.rate=100,a.prototype.length=1/0,a.prototype.SESSION=-1,a.prototype.INDEX=0,a.prototype.PAUSED=!0,a.prototype.BACKW=!0,a.forceCall=function(a){return a.INDEX+=a.BACKW?-1:1,a.task.call(a.owner,a.INDEX,a.length,a.BACKW)===!1||a.isAtEnd()?(a.pause(),!1):!0},a.prototype.isAtEnd=function(){return this.BACKW?isFinite(this.length)&&this.INDEX<1:this.INDEX+1>this.length},a.prototype.synchronize=function(){this.PAUSED||(clearInterval(this.SESSION),this.SESSION=setInterval(a.forceCall,this.rate,this))},a.prototype.pause=function(){clearInterval(this.SESSION),this.PAUSED=!0},a.prototype.start=function(a){var b=Boolean(a);(this.BACKW!==b||!this.isAtEnd()&&this.PAUSED)&&(this.BACKW=b,this.PAUSED=!1,this.synchronize())},function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame&&cancelAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),b}(),a}(CLC),CLC=function(a){return a.display=function(){function a(a,b){var c=$("<div class='clc-opt-control'></div>"),e=d(),f=$("<label class='clc-opt-label' for='"+e+"'>"+b.texte+"</label>"),g=$("<input class='clc-opt-input' id='"+e+"' name='"+b.nom+"' value='"+a.options[b.nom]+"' />");if(b.largeur?g.css({width:b.largeur}):g.css({width:"auto"}),b.taille?g.attr("maxlength",b.taille):g.removeAttr("maxlength"),c.append(f,g),b.texteApres){var h=$("<label class='clc-opt-label' for='"+e+"'>"+b.texteApres+"</label>");c.append(h)}return c}function b(a,b){var c=$("<div class='clc-opt-control'></div>"),e=$("<span class='clc-opt-label' >"+b.texte+"</span>"),f=$("<span class='clc-input-container'></span>");c.append(e,f);for(var g=0;g<b.aValeur.length;g++){var h,i=d();h=b.aValeur[g]==a.options[b.nom]?"checked":"";var j=$("<label class='clc-radio-label' for='"+i+"' ><input type='radio' name='"+b.nom+"' id='"+i+"' "+h+" value='"+b.aValeur[g]+"' />&nbsp;"+b.aLabel[g]+"</label>");f.append(j)}return c}function c(a,b){var c=$("<div class='clc-opt-control'></div>"),e=$("<span class='clc-opt-label' >"+b.texte+"</span>"),f=$("<span class='clc-input-container'></span>");c.append(e,f);for(var g=0;g<b.aValeur.length;g++){var h,i=d();h=$.inArray(b.aValeur[g],a.options[b.nom])>-1?"checked":"";var j=$("<label class='clc-checkbox-label' for='"+i+"' ><input type='checkbox' name='"+b.nom+"' id='"+i+"' "+h+" value='"+b.aValeur[g]+"' />&nbsp;"+b.aLabel[g]+"</label>");f.append(j)}return c}function d(){for(var a=[],b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),c=0;10>c;c++){var d=0+Math.floor(Math.random()*(b.length-1-0+1));a[c]=b[d]}return a.join("")}function e(a,b){var c=b.path(a.attributes.d.value.trim());return $.each(a.attributes,function(a,b){"d"!=b.name&&c.attr(b.name,b.value)}),c}function f(a,b){var c=b.ellipse(a.attributes.cx.value,a.attributes.cy.value,a.attributes.rx.value,a.attributes.ry.value);return $.each(a.attributes,function(a,b){"cx"!=b.name&&"cy"!=b.name&&"rx"!=b.name&&"ry"!=b.name&&c.attr(b.name,b.value)}),a.attributes.fill||c.attr("fill","#000"),a.attributes.stroke||c.attr("stroke","#000"),c}function g(a,b){return rElt=b.circle(a.attributes.cx.value,a.attributes.cy.value,a.attributes.r.value),$.each(a.attributes,function(a,b){"cx"!=b.name&&"cy"!=b.name&&"r"!=b.name&&rElt.attr(b.name,b.value)}),rElt}function h(a,b){var c=a.attributes.x||{value:0},d=a.attributes.y||{value:0},e=b.rect(c.value,d.value,a.attributes.width.value,a.attributes.height.value);return $.each(a.attributes,function(a,b){"x"!=b.name&&"y"!=b.name&&"with"!=b.name&&"height"!=b.name&&e.attr(b.name,b.value)}),e}function i(a,b){for(var c=a.attributes.points.value.replace(/ */," ").trim().split(" "),d="M"+c[0],e=1;e<c.length;e++)d+="L"+c[e];d+="L"+c[0];var f=b.path(d);return $.each(a.attributes,function(a,b){"points"!=b.name&&f.attr(b.name,b.value)}),f}function j(a,b,c){var d=c.getElementById(b);if("linearGradient"==d.nodeName){var e="",f=d.attributes.x1.value,g=d.attributes.y1.value,h=d.attributes.x2.value,i=d.attributes.y2.value,j=Raphael.angle(h,i,f,g);$(d).children("stop")[0].style["stop-color"],$(d).children("stop")[$(d).children("stop").length-1].style["stop-color"];e+=j,$(d).children("stop").each(function(a,b){e+="-"+b.style["stop-color"]+":"+100*b.attributes.offset.value}),a.attr("fill",e)}}var k={};return k.createTextLabel=function(a){var b=$("<div class='text-sprite'></div>");return b.css({position:"absolute",display:"block",fontSize:"24px",width:"auto",height:"auto",webkitUserSelect:"none",khtmlUserSelect:"none",mozUserSelect:"none",msUserSelect:"none",userSelect:"none",cursor:"pointer",webkitBorderRadius:3,khtmlBorderRadius:3,mozBorderRadius:3,msBorderRadius:3,borderRadius:3}),a?(b.html(a),b):b},k.createFraction=function(a,b){var c=$("<div class='text-sprite'></div>");c.css({position:"absolute",display:"block",fontSize:"24px",width:"auto",height:"auto",webkitUserSelect:"none",khtmlUserSelect:"none",mozUserSelect:"none",msUserSelect:"none",userSelect:"none",cursor:"pointer"});var d=$("<div class='text-numerateur'></div>"),e=$("<div class='text-denominateur'></div>");return c.append(d,e),d.html(a),e.html(b),d.css({textAlign:"center",padding:"0px 0px 0px 0px",borderBottom:"2px solid"}),e.css({textAlign:"center",padding:"0px 0px 0px 0px",top:d.height()}),c},k.createTextField=function(a,b){var c;return a.tabletSupport===!0?(c=$("<div class='text-field' tabindex=\"-1\"></div>"),c.css({position:"absolute",display:"block",fontFamily:"sans-serif",fontSize:"24px",lineHeight:"34px",textAlign:"center",width:24*b*3/4,overflow:"hidden",height:"34px",background:"white",webkitBorderRadius:3,khtmlBorderRadius:3,mozBorderRadius:3,msBorderRadius:3,borderRadius:3}),c.val=function(){return void 0===arguments[0]?this.html():void this.html(arguments[0])},c.focus=function(){$(".text-field").removeClass("actif"),this.addClass("actif")},c.blur=function(){this.removeClass("actif")},c.on("blur",function(a){a.preventDefault(),$(this).removeClass("actif")}),c.on("touchstart",function(a){a.preventDefault(),c.focus()})):(c=$("<input type='text' class='text-field' />"),c.css({position:"absolute",display:"block",fontFamily:"sans-serif",fontSize:"24px",textAlign:"center",padding:"5px",width:24*b*3/4,height:"auto",border:"1px solid #ccc",webkitBorderRadius:3,khtmlBorderRadius:3,mozBorderRadius:3,msBorderRadius:3,borderRadius:3}),c.attr("maxlength",b)),c},k.createImageSprite=function(a,b,c,d){var e=a.images[b].clone();return"number"==typeof arguments[2]&&"number"==typeof arguments[3]&&e.css({width:c,height:d,backgroundSize:"auto"}),e},k.createEmptySprite=function(){var a=$("<div class='ui-helper-clearfix'></div>");return a.css({position:"absolute",width:"auto"}),a},k.createVideoSprite=function(a,b){var c=$("<video align=center autoplay loop class='video-sprite'><source src="+a.getURI(b)+" type='video/mp4'></video>");return c},k.createSoundSprite=function(a,b){return a.sounds[b].clone(!0)},k.createMovieClip=function(a,b,c,d,e){function f(){var a=i.image.position().left,b=i.image.position().top;a>-(j-c)?i.image.css({left:a-c}):b>-(k-d)?i.image.css({left:0,top:b-d}):i.image.css({left:0,top:0}),a=i.image.position().left,b=i.image.position().top,i.currentFrame=Math.abs(Math.round(a/c))+Math.abs(Math.round(b/d))*Math.round(j/c)+1,i.conteneur.trigger("enterframe")}function g(){var a=i.image.position().left,b=i.image.position().top;0>a?i.image.css({left:a+c}):0>b?i.image.css({left:-(j-c),top:b+d}):i.image.css({left:-(j-c),top:-(k-d)}),a=i.image.position().left,b=i.image.position().top,i.currentFrame=Math.abs(Math.round(a/c))+Math.abs(Math.round(b/d))*Math.round(j/c)+1,i.conteneur.trigger("enterframe")}function h(a){i.currentFrame==a.data.to&&(i.pause(),i.conteneur.off("enterframe",h))}var i={};i.animId=0,i.totalFrame=0,i.currentFrame=1,i.conteneur=a.images[b].clone(),i.image=i.conteneur.find("img");var j=i.conteneur.width(),k=i.conteneur.height();return i.totalFrame=Math.floor(j/c)+Math.floor(k/d),i.conteneur.removeClass("image-sprite"),i.conteneur.addClass("animatable-sprite"),i.conteneur.css({width:c,height:d,overflow:"hidden"}),i.animId=CLC.animation.creerDemon({},f,e),i.play=function(){i.animId.start()},i.pause=function(){i.animId.pause()},i.gotoAndPlay=function(a){var b=Math.round(j/c),e=a%b===0?b:a%b,f=a%b===0?Math.floor(a/b)-1:Math.floor(a/b),g=-(e-1)*c,h=-f*d;i.image.css({left:g,top:h}),i.animId.start()},i.gotoAndStop=function(a){var b=Math.round(j/c),e=a%b===0?b:a%b,f=a%b===0?Math.floor(a/b)-1:Math.floor(a/b),g=-(e-1)*c,h=-f*d;i.image.css({left:g,top:h}),i.currentFrame=a,i.conteneur.trigger("enterframe")},i.nextFrame=function(){f()},i.prevFrame=function(){g()},i.playFromTo=function(a,b){i.conteneur.on("enterframe",{to:b},h),i.gotoAndPlay(a)},i},k.createOptControl=function(d,e){return"text"==e.type?control=a(d,e):"radio"==e.type?control=b(d,e):"checkbox"==e.type&&(control=c(d,e)),control},k.createOptConteneur=function(){var a=$("<div class='clc-opt-conteneur ui-helper-clearfix'></div>");return a.css({width:"100%"}),a},k.createCorrectionLabel=function(a){var b=k.createTextLabel(a);return b.css({fontWeight:"bold",backgroundColor:"#237F00",color:"#fff",padding:5,border:"1px solid #237F00"}),b},k.drawBar=function(a){var b=a.width(),c=a.height(),d=$("<canvas></canvas>").attr({width:b,height:c+5});d.css({position:"absolute"});var e=d[0].getContext("2d");return e.strokeStyle="red",e.lineCap="round",e.lineWidth=5,e.globalAlpha=.5,e.beginPath(),e.moveTo(5,5),e.lineTo(b-5,c),e.stroke(),d.css({left:a.position().left+5,top:a.position().top+5}),d},k.hitTestObject=function(a,b,c){c||(c="touch");var d=a.offset();d.right=d.left+a.outerWidth(),d.bottom=d.top+a.outerHeight();var e=b.offset();return e.right=e.left+b.outerWidth(),e.bottom=e.top+b.outerHeight(),"touch"==c?!(e.right<d.left||e.left>d.right||e.bottom<d.top||e.top>d.bottom):"fit"==c?!(e.left<d.left||e.right>d.right||e.top<d.top||e.bottom>d.bottom):!1},k.createSvgContainer=function(a,b){var c=$("<div></div>");return c.css({position:"absolute",width:a,height:b}),c.paper=Raphael(c[0],a,b),c},k.createRaphSet=function(a,b,c){var d=a.images[b],k=$(d).find("svg").children(),l=c.set();return k.each(function(a,b){var k;if("path"==b.nodeName?k=e(b,c):"ellipse"==b.nodeName?k=f(b,c):"circle"==b.nodeName?k=g(b,c):"rect"==b.nodeName?k=h(b,c):"polygon"==b.nodeName?k=i(b,c):("polyline"==b.nodeName||"line"==b.nodeName)&&(k=createRaphPolyline(b,c)),"undefined"!==k&&"undefined"!==k.attr("fill")&&"url"==k.attr("fill").substr(0,3)){var m=k.attr("fill").substring(5,k.attr("fill").length-1);j(k,m,d)}l.push(k)}),l},k.createSvgJsContainer=function(a,b){var c=$("<div></div>");return c.css({position:"absolute",width:a,height:b}),c.paper=SVG(c[0]).size(a,b),c},k}(),a}(CLC);